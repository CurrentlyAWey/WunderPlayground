<!DOCTYPE html>
<html>
	<head>
		<title>Testing</title>
		<script src="http://code.jquery.com/jquery-latest.js"></script>
		<script>
			var info = {};
			info.query = prompt("Please enter a search query","search");
			info.parse = info.query.split(" ");
			info.request = "http://cooper-union-search-proxy.herokuapp.com/twitter/search/";
			for(var i =0; i< info.parse.length;  i++){
				info.request += (info.parse[i] + "%20");
			}
			info.request = info.request.substr(0,info.request.length-3) + "?count=100";
			console.log(info);
			$.getJSON(info.request, function(response){
				console.log(response);
				
				for(var i = 0; i < response.statuses.length; i++){
					var textParse = response.statuses[i].text.split(/[ :]/);
					var flag = false;
					for (var j = 0; j < textParse.length; j++){
						if (textParse[j] === "https" || textParse[j] === "http" || textParse[j] === "RT"){
							flag = true;
							break;
						}
					}
 					if(response.statuses[i].retweeted === false && flag === false){
						var output = "<p> "+ response.statuses[i].user.name + " tweeted: ";
						for (var j = 0; j < textParse.length; j++){
							if (textParse[j][0]==="#"){
								output += (" <span class='hashtag'>"+textParse[j]+"</span>");
								console.log(textParse[j]);
							}
							else if (textParse[j][0]==="@"){
								output += (" <span class='mention'>"+textParse[j]+"</span>");
								console.log(textParse[j]);
							}

							else
								output += (" " + textParse[j]);			
						}
						output+="</p>";
						$("html").append(output);
					}
				}
     			 });			
		</script>

		<style>
			.hashtag{ 
				text-decoration:underline;
				color:blue;
			}
			.mention{ 
				text-decoration:underline;
				color:red;
			}
		</style>
	</head>
	<body>
<p></p>
	</body>

</html>


